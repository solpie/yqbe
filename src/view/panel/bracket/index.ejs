<link class="challonge_stylesheet" href="/css/bracket.css" media="all" rel="stylesheet">
<style>
    body {
        font-family: '微软雅黑'
    }

    @font-face {
        font-family: 微软雅黑;
        src: url('微软雅黑.eot'); /* IE9 Compat Modes */
        src: url('微软雅黑.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('微软雅黑.woff') format('woff'), /* Modern Browsers */ url('微软雅黑.ttf') format('truetype'), /* Safari, Android, iOS */ url('微软雅黑.svg#微软雅黑') format('svg'); /* Legacy iOS */
    }

    .bracket {
        overflow: hidden;
        background-image: url(/img/panel/stage1v1/bracketBg.png);
        background-repeat: repeat;
    }

    .bracket-line {
        fill: none;
        stroke: #F0F0F0;
        stroke-width: 2px
    }

    .match--player-name2 {
        font-family: '微软雅黑';
        font-size: 32px;
        /*font-weight: bold;*/
        fill: #ffeed1;
        text-shadow: 1px 0 1px #8B4513, 0 1px 1px #8B4513,
        0 -1px 1px #8B4513, -1px 0 1px #8B4513;
    }

    .match--player-score {
        fill: #111;
        font-size: 35px;
        text-shadow: none
    }

    .match--player-name.-placeholder {
        font-style: italic;
        font-size: 22px;
        fill: #BBB
    }

    .match--player image {
        opacity: .3;
        /*filter: grayscale(100%);*/
    }

    /*style="filter: grayscale(100%);"*/

</style>
<div class="bracket">
    <%
    matchArr.length = 14;
    var setMatchPos = function (idx, x, y) {
        matchArr[idx].x = x;
        matchArr[idx].y = y;
    }
    var playerHintMap = {
        '5': ['  第1场败者', '  第2场败者'],
        '6': ['  第3场败者', '  第4场败者'],
        '9': ['  第7场败者', ''],
        '13': ['  第12场败者', ''],
        '10': ['  第8场败者', ''],
        '14': ['', '  第13场胜者']
    }
    var scale = 0.8;
    var playerHeight = 76 * scale;
    var playerWidth = 180 * scale;
    var i;
    var ms;
    for (i = 0; i < 4; i++) {
        ms = matchArr[i];
        ms.x = 0;
        ms.y = 35 + 160 * i;
    }
    // 5 6
    for (i = 0; i < 2; i++) {
        ms = matchArr[i + 4]
        ms.x = 0;
        ms.y = 760 + 160 * i
    }
    // 7 8
    var col2x = 400;
    for (i = 0; i < 2; i++) {
        ms = matchArr[i + 6]
        ms.x = col2x;
        ms.y = 115 + 320 * i
    }
    // 9 10
    setMatchPos(8, col2x, 700 + 160);
    setMatchPos(9, col2x, 700);
    var col3x = col2x * 2;
    //  11
    setMatchPos(10, col3x, 780);
    // 12
    setMatchPos(11, col3x, 280);
    var col4x = col2x * 3;
    //  13
    setMatchPos(12, col4x, 730);
    // 14
    setMatchPos(13, col4x, 345);
    //    var col5x = col2x * 4;
    //    setMatchPos(14, col5x, 350);
    %>
    <svg class="bracket-svg" width="1920" height="1080" viewBox="0 0 1920 1080">
        <linearGradient id="g660" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="40%" y2="0%" x2="60%" y2="0%"
                        x2="70%" y2="0%">
            <stop stop-opacity="0" stop-color="#FFFFFF" offset="0.1"/>
            <stop stop-opacity="1" stop-color="#E3A820" offset=".2"/>
            <stop stop-opacity="1" stop-color="#E3A820" offset=".3"/>
            <stop stop-opacity="0" stop-color="#FFFFFF" offset=".4"/>
        </linearGradient>


        <defs>
            <clipPath id="theSVGPath">
                <rect x="26" y="0" stroke="#000000" stroke-miterlimit="10" width="60" height="60" rx="5" ry="5"/>
            </clipPath>

            <clipPath id="theSVGPath2">
                <rect x="26" y="60" stroke="#000000" stroke-miterlimit="10" width="60" height="60" rx="5" ry="5"/>
            </clipPath>
        </defs>
        <g>
            <!--first col-->
            <svg x="0" y="<%= matchArr[0].y + playerHeight %>" data-path="1-7">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 160 L 228 160 M <%= col2x - 100 %> 83 L 375 83"
                      class="bracket-line"/>
            </svg>

            <svg x="0" y="<%= matchArr[2].y + playerHeight %>" data-path="3-8">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 160 L 228 160 M <%= col2x - 100 %> 83 L 375 83"
                      class="bracket-line"/>
            </svg>


            <svg x="0" y="<%= matchArr[9].y + playerHeight %>" data-path="5-10">
                <path d="M 228 60 L <%= col2x - 100 %> 60 L <%= col2x - 100 %> 1 L 375 1"
                      class="bracket-line"/>
            </svg>
            <svg x="0" y="<%= matchArr[8].y + playerHeight %>" data-path="6-9">
                <path d="M 228 60 L <%= col2x - 100 %> 60 L <%= col2x - 100 %> 1 L 375 1"
                      class="bracket-line"/>
            </svg>

            <!--second col-->
            <svg x="<%= col2x %>" y="<%= matchArr[6].y + playerHeight %>" data-path="7-12">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 326 L 228 326 M 300 160 L 375 160"
                      class="bracket-line"/>
            </svg>
            <svg x="<%= col2x %>" y="<%= matchArr[9].y + playerHeight %>" data-path="10-11">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 165 L 228 165 M 300 82 L 375 82"
                      class="bracket-line"/>
            </svg>
            <!--third col-->

            <svg x="<%= col3x %>" y="<%= matchArr[11].y + playerHeight %>" data-path="12-14">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 60 L 375 60"
                      class="bracket-line"/>
            </svg>

            <svg x="<%= col3x %>" y="<%= matchArr[12].y + playerHeight %>" data-path="11-13">
                <path d="M 228 60 L <%= col2x - 100 %> 60 L <%= col2x - 100 %> 1 L 375 1"
                      class="bracket-line"
                      data-line-length="41"></path>
            </svg>
        </g>
        <g>
            <%
            for(i = 0; i < matchArr.length; i++) {
                var match = matchArr[i];
                var isBlueWin = match.playerSvgArr[0].score > match.playerSvgArr[1].score;
                var isEmptyMatch = !match.playerSvgArr[0].score && !match.playerSvgArr[1].score && playerHintMap[match.idx]
                var isOverMatch =
                        match.idx == 5
                        || match.idx == 6
                        || match.idx == 9
                        || match.idx == 10
                        || match.idx == 11
                        || match.idx == 13
                        || match.idx == 14
            %>
            <svg x="<%= match.x %>" y="<%= match.y %>" class="match -complete">
                <text x="11" y="<%= playerHeight + 11 %>" width="24" height="10" text-anchor="middle"
                      class="match--identifier"><%= match.idx %>
                </text>

                <rect x="24" y="3" width="204" height="<%= playerHeight + 4 %>" rx="3" ry="3"
                      class="match--wrapper-background "></rect>

                <rect x="26" y="5" width="200" height="<%= playerHeight * 2 %>" rx="3" ry="3"
                      class="match--base-background"></rect>

                <rect x="191" y="5" width="<%= playerHeight %>" height="<%= playerHeight * 2 %>" rx="3" ry="3"
                      class="match--scores-background"></rect>

                <% if(isBlueWin){ %>
                <rect x="191" y="5" width="<%= playerHeight %>" height="<%= playerHeight - 2 %>" rx="3" ry="3"
                      class="match--winner-background"></rect>

                <% }else if(match.playerSvgArr[1].score){ %>
                <rect x="191" y="<%= playerHeight + 5 %>" width="<%= playerHeight %>" height="<%= playerHeight %>"
                      rx="3" ry="3"
                      class="match--winner-background"></rect>
                <% } %>

                <text x="225" y="<%= playerHeight * .8 %>" width="21" height="12" text-anchor="middle"
                      class="match--player-score">
                    <%= match.playerSvgArr[0].score %></text>
                <text x="225" y="<%= playerHeight * 1.8 %>" width="21" height="12" text-anchor="middle"
                      class="match--player-score">
                    <%= match.playerSvgArr[1].score %></text>
                <rect x="40" y="5" width="160" height="<%= playerHeight * 2 %>"
                      class="match--base-background"></rect>
                <g class="match--player"
                        <% if(isOverMatch && !isBlueWin&& !isEmptyMatch){ %>
                   style="opacity: .2"
                        <% } %>
                >
                    <text x="38" y="19" width="10" height="12" text-anchor="middle" class="match--seed">
                        <%= match.playerSvgArr[0].seed %></text>

                    <!--<image x="26" y="5" width="<%= playerWidth %>" height="<%= playerHeight %>"-->
                    <!--xlink:href="<%= match.playerSvgArr[0].avatar || "/img/panel/stage/blue.png" %>"/>-->

                    <text x="35" y="<%= playerHeight - 14 %>"
                          width="147" height="20"
                            <% if(isEmptyMatch){ %>
                          class="match--player-name -placeholder"
                            <% }else{ %>
                          class="match--player-name2"
                            <% } %>
                    >
                        <%= isEmptyMatch ? playerHintMap[match.idx][0] : match.playerSvgArr[0].name %>
                    </text>
                </g>
                <g class="match--player"
                        <% if(isOverMatch && isBlueWin && !isEmptyMatch){ %>
                   style="opacity: .2"
                        <% } %>
                >


                    <text x="38" y="42" width="10" height="12" text-anchor="middle" class="match--seed">
                        <%= match.playerSvgArr[1].seed %></text>

                    <!--<image x="26" y="<%= playerHeight + 5 %>" width="<%= playerWidth %>" height="<%= playerHeight %>"-->
                    <!--xlink:href="<%= match.playerSvgArr[1].avatar || "/img/panel/stage/red.png" %>"/>-->

                    <text x="35" y="<%= playerHeight * 2 - 14 %>"
                          width="147" height="20"
                            <% if(isEmptyMatch){ %>
                          class="match--player-name -placeholder"
                            <% }else{ %>
                          class="match--player-name2"
                            <% } %>
                    >
                        <%= isEmptyMatch ? playerHintMap[match.idx][1] : match.playerSvgArr[1].name %>
                    </text>
                </g>


                <line x1="26" y1="<%= playerHeight + 4 %>" x2="252" y2="<%= playerHeight + 4 %>"
                      class="match--player-divider"></line>
            </svg>
            <% } %>
        </g>


        <image x="0" y="0" width="1410"
               height="36"
               xlink:href="/img/panel/stage1v1/bracketTitle1.png"/>

        <image x="0" y="<%= matchArr[3].y + playerHeight * 2 + 20 %>" width="1410"
               height="36"
               xlink:href="/img/panel/stage1v1/bracketTitle2.png"/>


        <!--<image x="1370" y="100" width="599" height="753"-->
        <!--xlink:href="/img/panel/stage1v1/win/playerBgKing.png"/>-->
    </svg>
</div>