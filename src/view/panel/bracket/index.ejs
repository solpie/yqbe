<link class="challonge_stylesheet" href="/css/bracket.css" media="all" rel="stylesheet">
<style>
    .bracket {
        overflow: hidden;
    }
</style>
<div class="bracket">
    <%
    matchArr.length = 14;
    var setMatchPos = function (idx, x, y) {
        matchArr[idx].x = x;
        matchArr[idx].y = y;
    }
    var scale = 0.8;
    var playerHeight = 76 * scale;
    var playerWidth = 180 * scale;
    var i;
    var ms;
    for (i = 0; i < 4; i++) {
        ms = matchArr[i];
        ms.x = 0;
        ms.y = 35 + 160 * i;
    }
    // 5 6
    for (i = 0; i < 2; i++) {
        ms = matchArr[i + 4]
        ms.x = 0;
        ms.y = 760 + 160 * i
    }
    // 7 8
    var col2x = 400;
    for (i = 0; i < 2; i++) {
        ms = matchArr[i + 6]
        ms.x = col2x;
        ms.y = 130 + 320 * i
    }
    // 9 10
    setMatchPos(8, col2x, 700 + 160);
    setMatchPos(9, col2x, 700);
    var col3x = col2x * 2;
    //  11
    setMatchPos(10, col3x, 780);
    // 12
    setMatchPos(11, col3x, 300);
    var col4x = col2x * 3;
    //  13
    setMatchPos(12, col4x, 730);
    // 14
    setMatchPos(13, col4x, 350);
    //    var col5x = col2x * 4;
    //    setMatchPos(14, col5x, 350);
    %>
    <svg class="bracket-svg" width="1920" height="1080" viewBox="0 0 1920 1080">
        <g>
            <svg x="0" y="<%= matchArr[0].y + playerHeight %>" data-path="1-7">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 180 L 228 180 M <%= col2x - 100 %> 98 L <%= col2x %> 98"
                      class="bracket-line"/>
            </svg>

            <svg x="0" y="<%= matchArr[2].y + playerHeight %>" data-path="3-8">
                <path d="M 228 1 L <%= col2x - 100 %> 1 L <%= col2x - 100 %> 180 L 228 180 M <%= col2x - 100 %> 98 L <%= col2x %> 98"
                      class="bracket-line"/>
            </svg>


            <svg x="0" y="<%= matchArr[9].y + playerHeight %>" data-path="5-10">
                <path d="M 228 60 L 236 60 L 236 1 L 244 1" class="bracket-line"/>
            </svg>
            <svg x="0" y="<%= matchArr[8].y + playerHeight %>" data-path="6-9">
                <path d="M 228 60 L 236 60 L 236 1 L 244 1" class="bracket-line"/>
            </svg>

            <!--first col-->

            <svg x="488" y="340" data-path="11-13">
                <path d="M 228 26 L 236 26 L 236 1 L 244 1" class="bracket-line"
                      data-line-length="41"></path>
            </svg>
            <svg x="244" y="340" data-path="10-11">
                <path d="M 228 1 L 236 1 L 236 27" class="bracket-line"
                      data-line-length="41"></path>
            </svg>
            <svg x="244" y="367" data-path="9-11">
                <path d="M 228 26 L 236 26 L 236 1 L 244 1" class="bracket-line"
                      data-line-length="41"></path>
            </svg>


            <svg x="732" y="170" data-path="14-15">
                <path d="M 228 1 L 244 1" class="bracket-line" data-line-length="14"
                ></path>
            </svg>
            <svg x="488" y="143" data-path="12-14">
                <path d="M 228 1 L 236 1 L 236 26.000000000000014 L 244 26.000000000000014"
                      class="bracket-line" data-line-length="41.000000000000014"
                ></path>
            </svg>
            <svg x="244" y="89" data-path="7-12">
                <path d="M 228 1 L 236 1 L 236 53.999999999999986"
                      class="bracket-line" data-line-length="67.99999999999999"
                ></path>
            </svg>
            <svg x="244" y="143" data-path="8-12">
                <path d="M 228 53.000000000000014 L 236 53.000000000000014 L 236 1 L 244 1"
                      class="bracket-line" data-line-length="68.00000000000001"
                ></path>
            </svg>

        </g>

        <g>
            <%
            for(i = 0; i < matchArr.length; i++) {
                var match = matchArr[i];
            %>
            <svg x="<%= match.x %>" y="<%= match.y %>" class="match -complete ">
                <text x="11" y="<%= playerHeight + 6 %>" width="24" height="10" text-anchor="middle"
                      class="match--identifier"><%= match.idx %>
                </text>

                <rect x="24" y="3" width="204" height="<%= playerHeight + 4 %>" rx="3" ry="3"
                      class="match--wrapper-background "></rect>
                <rect x="26" y="5" width="200" height="<%= playerHeight * 2 %>" rx="3" ry="3"
                      class="match--base-background"></rect>
                <rect x="26" y="5" width="33" height="<%= playerHeight * 2 %>" rx="3" ry="3"
                      class="match--seed-background"></rect>
                <rect x="191" y="5" width="35" height="<%= playerHeight * 2 %>" rx="3" ry="3"
                      class="match--scores-background"></rect>
                <rect x="191" y="5" width="35" height="<%= playerHeight - 3 %>" rx="3" ry="3"
                      class="match--winner-background"></rect>
                <rect x="191" y="22" width="35" height="5"
                      class="match--winner-background"></rect>


                <text x="211" y="<%= playerHeight * .6 %>" width="21" height="12" text-anchor="middle"
                      class="match--player-score"><%= match.playerSvgArr[0].score %>
                </text>
                <text x="211" y="<%= playerHeight * 1.6 %>" width="21" height="12" text-anchor="middle"
                      class="match--player-score"><%= match.playerSvgArr[1].score %>
                </text>


                <g class="match--player">
                    <defs>
                        <clippath id="clipPath3101011">
                            <rect x="50" y="5" width="143" height="<%= playerHeight %>"
                            ></rect>
                        </clippath>
                    </defs>
                    <rect x="50" y="5" width="147" height="<%= playerHeight %>"
                          class="match--player-background"
                    ></rect>
                    <text x="38" y="19" width="10" height="12" text-anchor="middle"
                          class="match--seed"><%= match.playerSvgArr[0].seed %>
                    </text>
                    <image x="55" y="5" width="<%= playerWidth %>" height="<%= playerHeight %>"
                           xlink:href="/img/player/155.png"/>

                    <text clip-path="url(#clipPath3101011)" x="55" y="20"
                          width="147" height="12" class="match--player-name "
                    ><%= match.playerSvgArr[0].name %>
                    </text>
                </g>
                <g class="match--player">
                    <defs>
                        <clippath id="clipPath7317959">
                            <rect x="50" y="28" width="143" height="<%= playerHeight %>"
                            ></rect>
                        </clippath>
                    </defs>
                    <rect x="50" y="<%= playerHeight + 4 %>" width="147" height="<%= playerHeight %>"
                          class="match--player-background"
                    ></rect>
                    <text x="38" y="42" width="10" height="12" text-anchor="middle"
                          class="match--seed"><%= match.playerSvgArr[1].seed %>
                    </text>


                    <image x="55" y="<%= playerHeight + 5 %>" width="<%= playerWidth %>"
                           height="<%= playerHeight %>"
                           xlink:href="/img/player/155.png"/>

                    <text clip-path="url(#clipPath7317959)" x="55" y="43"
                          width="147" height="12" class="match--player-name "
                    ><%= match.playerSvgArr[1].name %>
                    </text>
                </g>
                <line x1="26" y1="<%= playerHeight + 4 %>" x2="226" y2="<%= playerHeight + 4 %>"
                      class="match--player-divider"></line>
            </svg>

            <% } %>

        </g>
        <g class="rounds" transform="translate(0,0)">
            <svg class="round" x="0">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">第一轮
                    </text>
                </g>
            </svg>
            <svg class="round" x="244">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">第二轮
                    </text>
                </g>
            </svg>
            <svg class="round" x="488">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">半决赛
                    </text>
                </g>
            </svg>
            <svg class="round" x="732">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">决赛
                    </text>
                </g>
            </svg>
        </g>


        <g class="rounds" transform="translate(0,<%= matchArr[3].y + playerHeight * 2 + 20 %>)">
            <svg class="round" x="0">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">败者组第一轮
                    </text>
                </g>
            </svg>
            <svg class="round" x="244">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">败者组第二轮
                    </text>
                </g>
            </svg>
            <svg class="round" x="488">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">败者组第三轮
                    </text>
                </g>
            </svg>
            <svg class="round" x="732">
                <g class="round-label" data-toggle=""
                >
                    <rect width="243" height="25"></rect>
                    <text x="122" y="17" width="243" height="15"
                          text-anchor="middle">败者组第四轮
                    </text>
                </g>
            </svg>
        </g>
        <!--</g>-->
    </svg>
</div>